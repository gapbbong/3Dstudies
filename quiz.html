<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>3D 프린터 운용 기능사 문제풀이</title>
    <style>
        body {
            font-family: 'Malgun Gothic', sans-serif;
            background-color: #f4f4f9;
            margin: 0;
            padding: 20px;
            display: flex;
            justify-content: center;
        }

        .container {
            width: 100%;
            max-width: 800px;
            background: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
        }

        h1 {
            text-align: center;
            color: #333;
        }

        .question-card {
            margin-bottom: 30px;
            padding: 20px;
            border: 1px solid #ddd;
            border-radius: 8px;
            background-color: #fff;
        }

        .question-text {
            font-size: 1.2em;
            font-weight: bold;
            margin-bottom: 15px;
            color: #2c3e50;
        }

        .question-image {
            max-width: 100%;
            height: auto;
            margin-bottom: 15px;
            border-radius: 5px;
            display: block;
        }

        .choices {
            list-style: none;
            padding: 0;
        }

        .choice-item {
            margin: 10px 0;
            padding: 10px;
            background-color: #f9f9f9;
            border: 1px solid #eee;
            border-radius: 5px;
            cursor: pointer;
            transition: background-color 0.2s;
        }

        .choice-item:hover {
            background-color: #eef2f7;
        }

        .choice-item.selected {
            background-color: #d1e7dd;
            border-color: #badbcc;
        }

        .choice-item.correct {
            background-color: #d4edda;
            border-color: #c3e6cb;
            color: #155724;
        }

        .choice-item.incorrect {
            background-color: #f8d7da;
            border-color: #f5c6cb;
            color: #721c24;
        }

        .controls {
            margin-top: 15px;
            display: flex;
            gap: 10px;
        }

        button {
            padding: 10px 20px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 1em;
        }

        .btn-check {
            background-color: #007bff;
            color: white;
        }

        .btn-check:hover {
            background-color: #0056b3;
        }

        .explanation {
            margin-top: 15px;
            padding: 15px;
            background-color: #fff3cd;
            border: 1px solid #ffeeba;
            border-radius: 5px;
            color: #856404;
            display: none;
        }

        .score-board {
            position: fixed;
            top: 20px;
            right: 20px;
            background: white;
            padding: 15px;
            border-radius: 8px;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
            font-weight: bold;
        }
    </style>
</head>

<body>

    <div class="score-board">
        맞은 개수: <span id="score">0</span> / <span id="total">0</span>
    </div>

    <div class="container">
        <h1>3D 프린터 운용 기능사 필기</h1>
        <div id="quiz-container">
            <!-- Questions will be loaded here -->
        </div>
    </div>

    <script>
        const rawQuestions = [
  {
    "number": "01",
    "question": "다음에서 설명하는 3D프린터 방식은?<br>열가소성 재료를 가는 실 형태로 만든 것을 필라멘트형이라고 하는데, 이것에 열을 가해 녹인 후 노즐을 거쳐 압출되는 재료를 적층하는 방식",
    "choices": [
      "① FDM 방식",
      "② SLA 방식",
      "③ MJF 방식",
      "④ SLS 방식"
    ],
    "image": null,
    "answer": "①",
    "explanation": "FDM(Fused Deposition Modeling) 방식은 필라멘트 형태의 열가소성 재료를 노즐에서 녹여 압출하며 층층이 쌓아 형상을 만드는 방식입니다."
  },
  {
    "number": "03",
    "question": "접촉식 3차원 스캐닝의 설명으로 틀린 것은?",
    "choices": [
      "① 접촉식 센서인 터치 프로브(Touch probe)를 이용하여 3차원 좌표를 읽어 내는 방식이다.",
      "② 대상물이 투명하거나 거울과 같이 반사를 일으키는 제품은 측정이 불가능하다.",
      "③ 대표적으로 CMM 방식 측정기가 있다.",
      "④ 제품이 너무 복잡한 경우 측정이 곤란하고, 작은 힘에도 쉽게 변형이 되는 제품은 측정할 수 없다."
    ],
    "image": null,
    "answer": "②",
    "explanation": "접촉식 스캐닝은 직접 접촉하여 측정하므로, 광학식(비접촉식)과 달리 투명하거나 반사되는 표면(거울 등)도 문제없이 측정할 수 있습니다. 따라서 '측정이 불가능하다'는 설명은 틀린 것입니다."
  },
  {
    "number": "05",
    "question": "측정 오류로 주변 점들에 비해서 불규칙적으로 형성된 점들을 수정하여 매끄럽게 보정해 주는 것은?",
    "choices": [
      "① 필터링(filtering)",
      "② 스무딩(smoothing)",
      "③ 블렌딩(blending)",
      "④ 리메싱(remeshing)"
    ],
    "image": null,
    "answer": "②",
    "explanation": "스무딩(Smoothing)은 측정 데이터의 노이즈나 불규칙한 점들을 부드럽게 다듬어 매끄러운 표면을 만드는 보정 작업입니다."
  }
];
        
        // Filter out noise
        let questions = rawQuestions.filter(q => 
            q.choices.length > 0 || q.answer || q.explanation
        );
        let score = 0;

        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
            return array;
        }

        function prepareQuestions() {
            questions.forEach(q => {
                // 1. Identify correct original index
                const answerText = q.answer || "";
                let correctOriginalIndex = -1;
                if (answerText.includes("1") || answerText.includes("①")) correctOriginalIndex = 0;
                else if (answerText.includes("2") || answerText.includes("②")) correctOriginalIndex = 1;
                else if (answerText.includes("3") || answerText.includes("③")) correctOriginalIndex = 2;
                else if (answerText.includes("4") || answerText.includes("④")) correctOriginalIndex = 3;
                
                q.correctOriginalIndex = correctOriginalIndex;

                // 2. Create choice objects with clean text and original index
                q.shuffledChoices = q.choices.map((choice, index) => {
                    // Remove "① ", "② ", etc. from the start
                    let cleanText = choice.replace(/^[①②③④❶❷❸❹❺\(\d+\)\d+\)]\s*/, '');
                    return {
                        text: cleanText,
                        originalIndex: index
                    };
                });

                // 3. Shuffle
                shuffleArray(q.shuffledChoices);
            });
        }

        function renderQuiz() {
            const container = document.getElementById('quiz-container');
            container.innerHTML = '';

            questions.forEach((q, index) => {
                const card = document.createElement('div');
                card.className = 'question-card';

                // Image
                let imgHtml = '';
                if (q.image) {
                    imgHtml = `<img src="${q.image}" class="question-image" alt="문제 이미지">`;
                }

                // Choices
                let choicesHtml = '';
                const labels = ['①', '②', '③', '④', '⑤'];
                q.shuffledChoices.forEach((choiceObj, cIndex) => {
                    const label = labels[cIndex] || (cIndex + 1) + '.';
                    choicesHtml += `<li class="choice-item" onclick="selectChoice(${index}, ${cIndex}, this)">${label} ${choiceObj.text}</li>`;
                });

                // Calculate correct label for explanation
                let correctLabel = q.answer || '정보 없음';
                const correctChoiceIndex = q.shuffledChoices.findIndex(c => c.originalIndex === q.correctOriginalIndex);
                if (correctChoiceIndex !== -1) {
                    correctLabel = labels[correctChoiceIndex];
                }

                card.innerHTML = `
                <div class="question-text">${index + 1}. ${q.question}</div>
                ${imgHtml}
                <ul class="choices" id="choices-${index}">
                    ${choicesHtml}
                </ul>
                <div class="controls">
                    <button class="btn-check" onclick="checkAnswer(${index})">정답 확인</button>
                </div>
                <div class="explanation" id="explanation-${index}">
                    <strong>정답:</strong> ${correctLabel}<br>
                    <strong>해설:</strong> ${q.explanation || '해설이 없습니다.'}
                </div>
            `;
                container.appendChild(card);
            });
        }

        window.selectChoice = function (qIndex, cIndex, element) {
            const parent = document.getElementById(`choices-${qIndex}`);
            // Remove selected class from siblings
            Array.from(parent.children).forEach(child => child.classList.remove('selected'));
            // Add to clicked
            element.classList.add('selected');
        };

        window.checkAnswer = function (qIndex) {
            const q = questions[qIndex];
            const explanationEl = document.getElementById(`explanation-${qIndex}`);
            const parent = document.getElementById(`choices-${qIndex}`);
            const selected = parent.querySelector('.selected');

            if (!selected) {
                alert("답을 선택해주세요.");
                return;
            }

            // Reveal explanation
            explanationEl.style.display = 'block';

            const selectedIndex = Array.from(parent.children).indexOf(selected);
            const selectedChoiceObj = q.shuffledChoices[selectedIndex];

            if (selectedChoiceObj.originalIndex === q.correctOriginalIndex) {
                selected.classList.add('correct');
                if (!q.checked) {
                    score++;
                    document.getElementById('score').textContent = score;
                    q.checked = true;
                }
            } else {
                selected.classList.add('incorrect');
                // Find and highlight the correct answer
                q.shuffledChoices.forEach((choiceObj, idx) => {
                    if (choiceObj.originalIndex === q.correctOriginalIndex) {
                        if (parent.children[idx]) {
                            parent.children[idx].classList.add('correct');
                        }
                    }
                });
            }

            // Disable further clicks
            Array.from(parent.children).forEach(child => {
                child.onclick = null;
                child.style.cursor = 'default';
            });
        };

        // Initialize
        document.addEventListener('DOMContentLoaded', () => {
            // Shuffle questions
            shuffleArray(questions);
            
            prepareQuestions();
            document.getElementById('total').textContent = questions.length;
            renderQuiz();
        });
    </script>

</body>

</html>
