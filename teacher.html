<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>3D í”„ë¦°í„° ìš´ìš©ê¸°ëŠ¥ì‚¬ - í•µì‹¬ ì´ë¡  (êµì‚¬ìš©)</title>
    <link rel="stylesheet" href="css/teacher.css">
    <script src="data.js"></script>
    <script src="js/teacher_data.js"></script>
</head>

<body>

    <div class="container">
        <aside class="sidebar">
            <h2>ëª©ì°¨</h2>
            <ul id="chapter-list">
                <!-- Chapters will be loaded here -->
            </ul>
            <button onclick="window.print()" class="print-btn">ğŸ–¨ï¸ ì¸ì‡„í•˜ê¸°</button>
            <button onclick="location.href='index.html'" class="back-btn">ğŸ  ë©”ì¸ìœ¼ë¡œ</button>
        </aside>

        <main class="content">
            <h1 id="chapter-title">ë‹¨ì›ì„ ì„ íƒí•˜ì„¸ìš”</h1>
            <div id="slider-area" class="slider-container" style="display: none;">
                <div class="slide-counter" id="slide-counter">1 / 5</div>
                <div class="slide-display" id="slide-display">
                    <!-- Image or Video goes here -->
                </div>
                <div class="slide-text" id="slide-text">
                    <!-- Text goes here -->
                </div>
                <button class="nav-btn prev-btn" onclick="prevSlide()">â®</button>
                <button class="nav-btn next-btn" onclick="nextSlide()">â¯</button>
            </div>
            <div id="placeholder-area">
                <p class="placeholder-text">ì™¼ìª½ ëª©ë¡ì—ì„œ ë‹¨ì›ì„ ì„ íƒí•˜ë©´<br>í•µì‹¬ ìš”ì•½ ìŠ¬ë¼ì´ë“œê°€ í‘œì‹œë©ë‹ˆë‹¤.</p>
            </div>
        </main>
    </div>

    <script>
        let currentSlides = [];
        let currentSlideIndex = 0;

        document.addEventListener('DOMContentLoaded', () => {
            const list = document.getElementById('chapter-list');

            if (!appData || !appData.chapters) {
                alert('ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¬ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.');
                return;
            }

            appData.chapters.forEach((chapter, index) => {
                const li = document.createElement('li');
                li.textContent = chapter.title;
                li.onclick = () => loadChapter(index);
                list.appendChild(li);
            });
        });

        function loadChapter(index) {
            const chapter = appData.chapters[index];
            document.getElementById('chapter-title').textContent = chapter.title;

            // Highlight active item
            const items = document.querySelectorAll('#chapter-list li');
            items.forEach(item => item.classList.remove('active'));
            items[index].classList.add('active');

            // Load slides from teacherData
            const chapterId = chapter.id;
            if (teacherData && teacherData[chapterId]) {
                currentSlides = teacherData[chapterId];
                currentSlideIndex = 0;
                showSlider();
                renderSlide();
            } else {
                document.getElementById('slider-area').style.display = 'none';
                document.getElementById('placeholder-area').style.display = 'block';
                document.getElementById('placeholder-area').innerHTML = "<p class='placeholder-text'>ì´ ë‹¨ì›ì€ ì•„ì§ ìŠ¬ë¼ì´ë“œ ìë£Œê°€ ì¤€ë¹„ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.</p>";
            }
        }

        function showSlider() {
            document.getElementById('slider-area').style.display = 'flex';
            document.getElementById('placeholder-area').style.display = 'none';
        }

        function renderSlide() {
            if (currentSlides.length === 0) return;

            const slide = currentSlides[currentSlideIndex];
            const displayEl = document.getElementById('slide-display');
            const textEl = document.getElementById('slide-text');
            const counterEl = document.getElementById('slide-counter');

            // Update Counter
            counterEl.textContent = `${currentSlideIndex + 1} / ${currentSlides.length}`;

            // Update Display
            displayEl.innerHTML = '';

            if (slide.type === 'image') {
                const img = document.createElement('img');
                img.src = slide.src;
                img.alt = "Slide Image";
                displayEl.appendChild(img);
                textEl.textContent = slide.text;
            } else if (slide.type === 'text') {
                const textDiv = document.createElement('div');
                textDiv.style.cssText = 'color: white; font-size: 2.5rem; padding: 40px; text-align: center; white-space: pre-line;';
                textDiv.textContent = slide.text;
                displayEl.appendChild(textDiv);
                textEl.textContent = '';
            }
        }

        function nextSlide() {
            if (currentSlides.length === 0) return;
            currentSlideIndex = (currentSlideIndex + 1) % currentSlides.length;
            renderSlide();
        }

        function prevSlide() {
            if (currentSlides.length === 0) return;
            currentSlideIndex = (currentSlideIndex - 1 + currentSlides.length) % currentSlides.length;
            renderSlide();
        }

        // Keyboard navigation
        document.addEventListener('keydown', (e) => {
            if (document.getElementById('slider-area').style.display === 'flex') {
                if (e.key === 'ArrowRight') nextSlide();
                if (e.key === 'ArrowLeft') prevSlide();
            }
        });
    </script>
</body>

</html>